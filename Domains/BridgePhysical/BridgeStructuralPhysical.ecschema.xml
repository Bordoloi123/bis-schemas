<?xml version="1.0" encoding="UTF-8"?>
<ECSchema schemaName="BridgeStructuralPhysical" alias="bphys" version="01.00.00" description="Base schema for Physical Bridges." xmlns="http://www.bentley.com/schemas/Bentley.ECXML.3.1">
    <ECSchemaReference name="ECDbMap" version="02.00.00" alias="ecdbmap"/>
    <ECSchemaReference name="BisCore" version="01.00.00" alias="bis"/>
    <ECSchemaReference name="LinearReferencing" version="01.00.00" alias="lr"/>
    <ECSchemaReference name="RoadRailAlignment" version="01.00.00" alias="rralign"/>
    <ECSchemaReference name="StructuralPhysical" alias="sp" version="01.00.00" />
    <KindOfQuantity typeName="LENGTH" displayLabel="LENGTH" persistenceUnit="M" relativeError="1e-2" />
    <KindOfQuantity typeName="LENGTH_SHORT" displayLabel="LENGTH" persistenceUnit="M" relativeError="1e-2" />
    <KindOfQuantity typeName="DIAMETER" displayLabel="DIAMETER" persistenceUnit="M" relativeError="1e-2" />
    <KindOfQuantity typeName="PLANE_ANGLE" displayLabel="PLANE_ANGLE" persistenceUnit="RAD" relativeError="1e-2" />
    <ECEntityClass typeName="BridgeCategoryModel">
        <BaseClass>bis:DefinitionModel</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>

    <!-- BEGIN Plan Elements -->
    <ECEntityClass typeName="PlanLine"  displayLabel="Plan Line" description="2D Lines indicating along a linear element in a Bridge Model">
        <BaseClass>bis:SpatialLocationElement</BaseClass>
        <BaseClass>lr:ILinearElement</BaseClass>
        <BaseClass>lr:ILinearlyLocatedElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
            <ILinearlyLocatedSegmentationHints xmlns="LinearReferencing.01.00.00">
                <SupportedLinearlyReferencedLocationTypes>1</SupportedLinearlyReferencedLocationTypes>
            </ILinearlyLocatedSegmentationHints>
        </ECCustomAttributes>
        <ECProperty propertyName="Skew" typeName="double" kindOfQuantity="PLANE_ANGLE" displayLabel="Skew" description="Skew angle of support relative to deck perpendicular (0 is perpendicular to alignment)" />
        <ECProperty propertyName="Length" typeName="double" displayLabel="Length" kindOfQuantity="LENGTH" />
    </ECEntityClass>
    <ECEntityClass typeName="SupportLine" modifier="Sealed" displayLabel="Support Line" description="2D Lines indicating where supports will meet supersertructre/Deck">
        <BaseClass>PlanLine</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="ConstructionLine" modifier="Sealed" displayLabel="Construction Line" description="2D Lines serving as a relevant reference axis for construction purposes">
        <BaseClass>PlanLine</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <!-- END Plan Elements -->
    <!-- BEGIN Bridge Items -->
    <ECEntityClass typeName="Bridge" modifier="Sealed" description="Physical bridge supporting a segment of a road or rail." >
        <BaseClass>bis:PhysicalElement</BaseClass>
        <BaseClass>lr:ILinearElement</BaseClass>
        <BaseClass>lr:ILinearlyLocatedElement</BaseClass>
        <BaseClass>bis:ISubModeledElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="PhysicalModelBreaksDownBridgeElement" strength="embedding" strengthDirection="Backward" modifier="Sealed" description="Relationship enabling break-down of an Physical Bridge Element into its constituent components">
        <BaseClass>bis:ModelModelsElement</BaseClass>
        <Source multiplicity="(0..1)" polymorphic="false" roleLabel="breaks down">
            <Class class="bis:PhysicalModel"/>
        </Source>
        <Target multiplicity="(1..1)" polymorphic="false" roleLabel="is broken down by">
            <Class class="Bridge"/>
        </Target>
    </ECRelationshipClass>
    <!-- END Bridge Items -->
    <!-- BEGIN SubstructureElements-->
        <ECEntityClass typeName="SubstructureElement" modifier="Abstract" description="Base class for physical elements describing substructures of a bridge." >
            <BaseClass>bis:PhysicalElement</BaseClass>
            <BaseClass>lr:ILinearlyLocatedElement</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00.00"/>
            </ECCustomAttributes>
        </ECEntityClass>
        <ECEntityClass typeName="GenericSubstructureElement" modifier="Sealed" description="Generic Substructure Element that is composed of its constituent structural components" >
            <BaseClass>SubstructureElement</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00.00"/>
            </ECCustomAttributes>
        </ECEntityClass>
        <!--TODO: Add Physical Element Assembles Elements Relationships for Generic SubstructureElement -->
        <!--
        <ECEntityClass typeName="WingWall">
            <BaseClass>sp:Wall</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00"/>
            </ECCustomAttributes>
            <ECProperty propertyName="Depth" typeName="double" displayLabel="Depth" kindOfQuantity="LENGTH" />
            <ECProperty propertyName="LongSideWidth" typeName="double" displayLabel="Long-side Width" kindOfQuantity="LENGTH"/>
            <ECProperty propertyName="ShortSideWidth" typeName="double" displayLabel="Short-side Width" kindOfQuantity="LENGTH"/>
            <ECProperty propertyName="LongSideHeight" typeName="double" displayLabel="Long-side Height" kindOfQuantity="LENGTH_SHORT"/>
            <ECProperty propertyName="ShortSideHeight" typeName="double" displayLabel="Short-side Height" kindOfQuantity="LENGTH_SHORT"/>
            <ECProperty propertyName="Skew" typeName="double" displayLabel="Skew" kindOfQuantity="PLANE_ANGLE" />
            <ECProperty propertyName="LongitudinalOffset" typeName="double" displayLabel="Offset - Longitudinal" kindOfQuantity="LENGTH_SHORT"/>
            <ECProperty propertyName="TransversalOffset" typeName="double" displayLabel="Offset - Transversal" kindOfQuantity="LENGTH_SHORT"/>
            <ECProperty propertyName="VerticalOffset" typeName="double" displayLabel="Offset - Vertical" kindOfQuantity="LENGTH_SHORT"/>
        </ECEntityClass>
        <ECEntityClass typeName="CantileveredWingWall" modifier="Sealed" displayLabel="Cantilevered">
            <BaseClass>WingWall</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00"/>asdfasdf
            </ECCustomAttributes>
        </ECEntityClass>
            <ECEntityClass typeName="PileCapAbutment" modifier="Sealed" displayLabel="Pile-Cap">
            <BaseClass>SubstructureElement</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00"/>
            </ECCustomAttributes>
        </ECEntityClass>
        <ECEntityClass typeName="StemWallAbutment" displayLabel="Stem-Wall">
            <BaseClass>SubstructureElement</BaseClass>
            <ECCustomAttributes>
                <ClassHasHandler xmlns="BisCore.01.00"/>
            </ECCustomAttributes>
        </ECEntityClass>      
        -->
    <!-- END SubstructureElements -->
    <!-- BEGIN Superstructure Elements -->
    <ECEntityClass typeName="BridgeSuperstructure" modifier="Abstract" description="Physical element aggregating all Superstructure Elements" >
        <BaseClass>bis:PhysicalElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="SuperstructureElement" modifier="Abstract" description="Base class for the element describing a Bridge superstructure component" >
        <BaseClass>bis:PhysicalElement</BaseClass>
        <BaseClass>lr:ILinearlyLocatedElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="BridgeSuperstructureAssemblesSuperstructureElements" strength="embedding" modifier="Sealed">
      <BaseClass>bis:PhysicalElementAssemblesElements</BaseClass>
      <Source multiplicity="(0..1)" polymorphic="false" roleLabel="is owned by 1 bridge substructure">
        <Class class="BridgeSuperstructure"/>
      </Source>
      <Target multiplicity="(0..*)" polymorphic="true" roleLabel="owns N substructure elements">
        <Class class="SuperstructureElement"/>
      </Target>
    </ECRelationshipClass>
    <ECEntityClass typeName="IBridgeSuperstructureMember" modifier="Abstract" description="Base mix-in for physical Elements to be a part of a Bridge SuperstructureElement" >
        <ECCustomAttributes>
            <IsMixin xmlns='CoreCustomAttributes.01.00'>
                <AppliesToEntityClass>bis:PhysicalElement</AppliesToEntityClass> <!-- Should be structural member? -->
            </IsMixin>
            <ClassHasHandler xmlns="BisCore.01.00.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECRelationshipClass typeName="SuperstructureElementAssemblesIBridgeSuperstructureMembers" strength="embedding" modifier="Sealed">
      <BaseClass>bis:PhysicalElementAssemblesElements</BaseClass>
      <Source multiplicity="(0..1)" polymorphic="false" roleLabel="is owned by 1 bridge support">
        <Class class="SuperstructureElement"/>
      </Source>
      <Target multiplicity="(0..*)" polymorphic="true" roleLabel="owns N support members">
        <Class class="IBridgeSuperstructureMember"/>
      </Target>
    </ECRelationshipClass>
    <ECEntityClass typeName="SimpleBeamSuperstructureElement" modifier="Abstract" description="Base class for the element describing a Simple beam Bridge superstructure Cross-Section." >
        <BaseClass>SuperstructureElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="PrestressedGirdersSuperstructure" modifier="Sealed" displayLabel="Prestressed Girders" description="Aspect describing a Prestressed girders superstructure Cross-Section." >
        <BaseClass>SimpleBeamSuperstructureElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
        <ECProperty propertyName="CrossSectionGirderCount" typeName="int" description="Number of beams/girders per span" displayLabel="Number of Girders"/>
        <ECProperty propertyName="GirderType" typeName="int" displayLabel="Girder Type"/>
        <ECProperty propertyName="GirderId" typeName="string" displayLabel="Girder ID"/>
    </ECEntityClass>
    <ECEntityClass typeName="PostTensionedCIPBoxSuperstructure" modifier="Sealed" displayLabel="Post-Tensioned Box" description="Aspect describing a Post-Tensioned Box superstructure Cross-Section." >
        <BaseClass>SimpleBeamSuperstructureElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <ECEntityClass typeName="CastInPlaceSlabSuperstructure" modifier="Sealed" displayLabel="Cast-In Place" description="Aspect describing a Cast-in Place Slab superstructure Cross-Section." >
        <BaseClass>SimpleBeamSuperstructureElement</BaseClass>
        <ECCustomAttributes>
            <ClassHasHandler xmlns="BisCore.01.00"/>
        </ECCustomAttributes>
    </ECEntityClass>
    <!-- END BridgeSuperstructure Elements -->
</ECSchema>
